@page
@model indexModel


@{
    ViewData["Title"] = "index";
}
<body class="background-section">
    <div class="sidebar">
        <p style="text-align: center;font-size:30px"><strong>Categories</strong></p>
        @foreach (var category in Model.Categories)
        {
            <div class="category-item">
                <a style="text-align: center;" asp-page="/CarsFromSelectedCategory" asp-route-id="@category.CategoryId">@category.CategoryName</a>
                <div class="submenu">
                    <p>@category.Description</p>
                </div>
            </div>
        }
        <p>
            @if (User.Identity.IsAuthenticated && User.IsInRole("Admin"))
            {
                <br />
                <a style="box-shadow: 0 0 35px rgba(0, 0, 0, 0.5);" class="btn" asp-page="CreateCategory">
                    <i class="fas fa-plus-circle"></i> Create New Category
                </a>
            }
        </p>
    </div>

    <div class="car-container">
        @foreach (var item in Model.Cars)
        {
            <div class="car-item">
                <p><img src="@item.CarPhoto" alt="Car Photo" /></p>
                <p> <strong>Model: @Html.DisplayFor(modelItem => item.Model)</strong></p>
                <p><strong>Price: @Html.DisplayFor(modelItem => item.Price) $</strong></p>
                <p class="details-btn"><a class="btn" asp-page="./DetailsPage" asp-route-id="@item.Id">Details</a></p>
                @if(User.Identity.IsAuthenticated && User.IsInRole("Admin"))
                {
                    <p class="details-btn"><a class="btn" asp-page="./EditCar" asp-route-id="@item.Id">Edit</a></p>
                    <p class="details-btn"><a class="btn" asp-page="./DeleteCar" asp-route-id="@item.Id">Delete</a></p>
                }
                @if (User.Identity.IsAuthenticated && !User.IsInRole("Admin"))
                {        
                    <form class="add-to-cart-form" method="post" asp-page-handler="AddToCart">
                        <input type="hidden" name="CarId" value="@item.Id" />
                        <input inputmode="numeric" type="number" value="1" name="Quantity" min="1" />
                        <button type="submit" class="btn">Add to cart</button>
                    </form>
                }
            </div>
        }
    </div>
</body>
